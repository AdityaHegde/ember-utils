<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/js/main/model-wrapper.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/Alerts.AlertMessage.html">Alerts.AlertMessage</a></li>
            
                <li><a href="../classes/AppWrapper.AppWrapper.html">AppWrapper.AppWrapper</a></li>
            
                <li><a href="../classes/DragDrop.DraggableMixin.html">DragDrop.DraggableMixin</a></li>
            
                <li><a href="../classes/DragDrop.DroppableMixin.html">DragDrop.DroppableMixin</a></li>
            
                <li><a href="../classes/GlobalModules.DisplayTextCollapsibleColumnDataMixin.html">GlobalModules.DisplayTextCollapsibleColumnDataMixin</a></li>
            
                <li><a href="../classes/GlobalModules.DisplayTextCollapsibleGlypiconColumnDataMixin.html">GlobalModules.DisplayTextCollapsibleGlypiconColumnDataMixin</a></li>
            
                <li><a href="../classes/GlobalModules.DisplayTextCollapsibleGlypiconView.html">GlobalModules.DisplayTextCollapsibleGlypiconView</a></li>
            
                <li><a href="../classes/GlobalModules.DisplayTextCollapsibleView.html">GlobalModules.DisplayTextCollapsibleView</a></li>
            
                <li><a href="../classes/GlobalModules.DisplayTextColumnDataMixin.html">GlobalModules.DisplayTextColumnDataMixin</a></li>
            
                <li><a href="../classes/GlobalModules.DisplayTextView.html">GlobalModules.DisplayTextView</a></li>
            
                <li><a href="../classes/GlobalModules.DisplayTextWithTooltipColumnDataMixin.html">GlobalModules.DisplayTextWithTooltipColumnDataMixin</a></li>
            
                <li><a href="../classes/GlobalModules.DisplayTextWithTooltipView.html">GlobalModules.DisplayTextWithTooltipView</a></li>
            
                <li><a href="../classes/GlobalModules.GlobalModuleColumnDataGroupMixin.html">GlobalModules.GlobalModuleColumnDataGroupMixin</a></li>
            
                <li><a href="../classes/LazyDisplay.LazyDisplayColumnDataGroup.html">LazyDisplay.LazyDisplayColumnDataGroup</a></li>
            
                <li><a href="../classes/LazyDisplay.LazyDisplayView.html">LazyDisplay.LazyDisplayView</a></li>
            
                <li><a href="../classes/ListGroup.ListColumnData.html">ListGroup.ListColumnData</a></li>
            
                <li><a href="../classes/ListGroup.ListColumnDataGroup.html">ListGroup.ListColumnDataGroup</a></li>
            
                <li><a href="../classes/ListGroup.ListGroupView.html">ListGroup.ListGroupView</a></li>
            
                <li><a href="../classes/ListGroup.ListItemView.html">ListGroup.ListItemView</a></li>
            
                <li><a href="../classes/model-wrapper.html">model-wrapper</a></li>
            
                <li><a href="../classes/ModelWrapper.ModelWrapper.html">ModelWrapper.ModelWrapper</a></li>
            
                <li><a href="../classes/Panels.PanelCollapsibleView.html">Panels.PanelCollapsibleView</a></li>
            
                <li><a href="../classes/Panels.PanelColumnDataGroup.html">Panels.PanelColumnDataGroup</a></li>
            
                <li><a href="../classes/Panels.PanelsView.html">Panels.PanelsView</a></li>
            
                <li><a href="../classes/Panels.PanelView.html">Panels.PanelView</a></li>
            
                <li><a href="../classes/Timer.AsyncQue.html">Timer.AsyncQue</a></li>
            
                <li><a href="../classes/Timer.Timer.html">Timer.Timer</a></li>
            
                <li><a href="../classes/Tree.LeafView.html">Tree.LeafView</a></li>
            
                <li><a href="../classes/Tree.NodeRecordMixin.html">Tree.NodeRecordMixin</a></li>
            
                <li><a href="../classes/Tree.NodeView.html">Tree.NodeView</a></li>
            
                <li><a href="../classes/Tree.TreeColumnData.html">Tree.TreeColumnData</a></li>
            
                <li><a href="../classes/Tree.TreeColumnDataGroup.html">Tree.TreeColumnDataGroup</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/alerts.html">alerts</a></li>
            
                <li><a href="../modules/app-wrapper.html">app-wrapper</a></li>
            
                <li><a href="../modules/drag-drop.html">drag-drop</a></li>
            
                <li><a href="../modules/global-module.html">global-module</a></li>
            
                <li><a href="../modules/global-module-column-data.html">global-module-column-data</a></li>
            
                <li><a href="../modules/global-module-view.html">global-module-view</a></li>
            
                <li><a href="../modules/lazy-display.html">lazy-display</a></li>
            
                <li><a href="../modules/list-column-data.html">list-column-data</a></li>
            
                <li><a href="../modules/list-group.html">list-group</a></li>
            
                <li><a href="../modules/list-item.html">list-item</a></li>
            
                <li><a href="../modules/model-wrapper.html">model-wrapper</a></li>
            
                <li><a href="../modules/panel-column-data.html">panel-column-data</a></li>
            
                <li><a href="../modules/panel-views.html">panel-views</a></li>
            
                <li><a href="../modules/panels.html">panels</a></li>
            
                <li><a href="../modules/timer.html">timer</a></li>
            
                <li><a href="../modules/tree.html">tree</a></li>
            
                <li><a href="../modules/tree-column-data.html">tree-column-data</a></li>
            
                <li><a href="../modules/tree-nodes.html">tree-nodes</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src/js/main/model-wrapper.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * Ember Data Model wrapper to support crud adaptor shipped with this util package.
 *
 * @module model-wrapper
 */

ModelWrapper = Ember.Namespace.create();

/**
 * Model wrapper model class.
 *
 * @class ModelWrapper.ModelWrapper
 */
ModelWrapper.ModelWrapper = DS.Model.extend({
  init : function() {
    this._super();
    var arrayProps = this.get(&quot;arrayProps&quot;), that = this;
    this.set(&quot;isDirty_alias&quot;, this.get(&quot;isDirty&quot;));
    Ember.addObserver(this, &quot;isDirty&quot;, this, &quot;attributeDidChange&quot;);
    for(var i = 0; i &lt; arrayProps.length; i++) {
      var arrayProp = arrayProps[i];
      this[arrayProp+&quot;WillBeDeleted&quot;] = that.childrenWillBeDeleted;
      this[arrayProp+&quot;WasAdded&quot;] = that.childrenWasAdded;
    }
  },

  childrenWillBeDeleted : function(props, idxs) {
    this._validation = this._validation || {};
    for(var i = 0; i &lt; props.length; i++) {
      var propId = Utils.getEmberId(props[i]);
      delete this._validation[propId];
      Ember.removeObserver(props[i], &quot;validationFailed&quot;, this, &quot;validationFailedDidChanged&quot;);
      Ember.removeObserver(props[i], &quot;isDirty&quot;, this, &quot;attributeDidChange&quot;);
      Ember.removeObserver(props[i], &quot;isLoading&quot;, this, &quot;attributeDidChange&quot;);
      Ember.removeObserver(props[i], &quot;isReloading&quot;, this, &quot;attributeDidChange&quot;);
      Ember.removeObserver(props[i], &quot;isSaving&quot;, this, &quot;attributeDidChange&quot;);
    }
  },

  childrenWasAdded : function(props, idxs) {
    for(var i = 0; i &lt; props.length; i++) {
      this.validationFailedDidChanged(props[i], &quot;validationFailed&quot;);
      this.attributeDidChange(props[i], &quot;isDirty&quot;);
      Ember.addObserver(props[i], &quot;validationFailed&quot;, this, &quot;validationFailedDidChanged&quot;);
      Ember.addObserver(props[i], &quot;isDirty&quot;, this, &quot;attributeDidChange&quot;);
      Ember.addObserver(props[i], &quot;isLoading&quot;, this, &quot;attributeDidChange&quot;);
      Ember.addObserver(props[i], &quot;isReloading&quot;, this, &quot;attributeDidChange&quot;);
      Ember.addObserver(props[i], &quot;isSaving&quot;, this, &quot;attributeDidChange&quot;);
    }
  },

  validationFailedDidChanged : function(obj, attr) {
    var val = obj.get(attr), objId = Utils.getEmberId(obj);
    this._validation = this._validation || {};
    if(val) {
      this._validation[objId] = 1;
    }
    else {
      delete this._validation[objId];
    }
    this.set(&quot;validationFailed&quot;, Utils.hashHasKeys(this._validation));
  },

  attributeDidChange : function(obj, attr) {
    this.set(attr+&quot;_alias&quot;, this.get(attr) || obj.get(attr));
  },

  /**
   * Boolean to denote validation failure. Poppulated by form module.
   *
   * @property validationFailed
   * @type Boolean
   */
  validationFailed : false,

  /**
   * Bubbled isLoading boolean from child records.
   *
   * @property isLoading_alias
   * @type Boolean
   */
  isLoading_alias : false,

  /**
   * Bubbled isReloading boolean from child records.
   *
   * @property isReloading_alias
   * @type Boolean
   */
  isReloading_alias : Ember.computed.oneWay(&quot;isReloading&quot;),

  /**
   * Bubbled isSaving boolean from child records.
   *
   * @property isSaving_alias
   * @type Boolean
   */
  isSaving_alias : Ember.computed.oneWay(&quot;isSaving&quot;),

  /**
   * Bubbled isDirty boolean from child records.
   *
   * @property isDirty_alias
   * @type Boolean
   */
  isDirty_alias : Ember.computed.oneWay(&quot;isDirty&quot;),
  isNotDirty : Ember.computed.not(&quot;isDirty_alias&quot;),

  /**
   * Boolean to denote disabling of save based on isDirty_alias, validationFailed, isLoading_alias, isReloading_alias, isSaving_alias.
   *
   * @property disableSave
   * @type Boolean
   */
  disableSave : Ember.computed.or(&quot;isNotDirty&quot;, &quot;validationFailed&quot;, &quot;isLoading_alias&quot;, &quot;isReloading_alias&quot;, &quot;isSaving_alias&quot;),
});

ModelWrapper.allowedModelAttrs = [{
  /**
   * Array of primary keys for the model. The values of these keys will be joined with &#x27;__&#x27; and will be assigned to &#x27;id&#x27;.
   *
   * @property keys
   * @type Array
   * @static
   */
  attr : &quot;keys&quot;,
  defaultValue : &quot;emptyArray&quot;,
}, {
  /**
   * API end point on server for transactions for this model.
   *
   * @property apiName
   * @type String
   * @default &quot;data/generic&quot;
   * @static
   */
  attr : &quot;apiName&quot;,
  defaultValue : &quot;value&quot;,
  value : &quot;data/generic&quot;,
}, {
  /**
   * Keys needed to make delete calls. These values will be taken from either the record or &#x27;CrudAdapter.GlobalData&#x27;
   *
   * @property queryParams
   * @type Array
   * @static
   */
  attr : &quot;queryParams&quot;, 
  defaultValue : &quot;emptyArray&quot;,
}, {
  /**
   * Keys needed to make find calls. These values will be taken from either the record or &#x27;CrudAdapter.GlobalData&#x27;
   *
   * @property findParams
   * @type Array
   * @static
   */
  attr : &quot;findParams&quot;, 
  defaultValue : &quot;emptyArray&quot;,
}, {
  /**
   * Keys for extra attributes to be passed along with record attrs during create/update call. These values will be taken from either the record or &#x27;CrudAdapter.GlobalData&#x27;
   *
   * @property extraAttrs
   * @type Array
   * @static
   */
  attr : &quot;extraAttrs&quot;, 
  defaultValue : &quot;emptyArray&quot;,
}, {
  /**
   * Keys from record to be deleted when making create/update call.
   *
   * @property ignoreFieldsOnCreateUpdate
   * @type Array
   * @static
   */
  attr : &quot;ignoreFieldsOnCreateUpdate&quot;, 
  defaultValue : &quot;emptyArray&quot;,
}, {
  /**
   * Keys from backup data to be deleted when data is recieved from server after a create/update call.
   *
   * @property ignoreFieldsOnRetrieveBackup
   * @type Array
   * @static
   */
  attr : &quot;ignoreFieldsOnRetrieveBackup&quot;, 
  defaultValue : &quot;emptyArray&quot;,
}, {
  /**
   * Keys from record data to be deleted when data is being backed up during a find call.
   *
   * @property removeAttrsFromBackupOnFind
   * @type Array
   * @static
   */
  attr : &quot;removeAttrsFromBackupOnFind&quot;, 
  defaultValue : &quot;emptyArray&quot;,
}, {
  /**
   * Retain id when backing up data.
   *
   * @property retainId
   * @type Boolean
   * @default false
   * @static
   */
  attr : &quot;retainId&quot;, 
  defaultValue : &quot;value&quot;,
  value : false,
}, {
  /**
   * Use id from record while backing up (default is to use &quot;new&quot; when creating record and id when updating). Used when records are child records and are not saved directly, in which case the child records must have an id and should be used when backing up.
   *
   * @property useIdForBackup
   * @type Boolean
   * @default false
   * @static
   */
  attr : &quot;useIdForBackup&quot;, 
  defaultValue : &quot;value&quot;,
  value : false,
}, {
  /**
   * Attribute that will be paginated. Applies during findNext calls.
   *
   * @property paginatedAttribute
   * @type String
   * @default &quot;id&quot;
   * @static
   */
  attr : &quot;paginatedAttribute&quot;, 
  defaultValue : &quot;value&quot;,
  value : &quot;id&quot;,
}, {
  /**
   * Callback called when normalizing record.
   *
   * @property normalizeFunction
   * @type Function
   * @param {Object} [hash] JSON object of the data returned from server.
   * @static
   */
  attr : &quot;normalizeFunction&quot;, 
  defaultValue : &quot;value&quot;,
  value : function() {},
}, {
  /**
   * Callback called before serializing child records.
   *
   * @property preSerializeRelations
   * @type Function
   * @param {Object} [data] JSON object of the data returned from server.
   * @static
   */
  attr : &quot;preSerializeRelations&quot;, 
  defaultValue : &quot;value&quot;,
  value : function() {},
}, {
  /**
   * Callback called for serializing data being sent to server.
   *
   * @property serializeFunction
   * @type Function
   * @param {Class} [record] Record being sent to server.
   * @param {Object} [json] JSON object of the data to be sent to server.
   * @static
   */
  attr : &quot;serializeFunction&quot;, 
  defaultValue : &quot;value&quot;,
  value : function() {},
}, {
  /**
   * Callback called after backing up data.
   *
   * @property backupData
   * @type Function
   * @param {Class} [record] Record being backed up.
   * @param {String|Class} [type] Record type.
   * @param {Object} [data] JSON object being backed up.
   * @static
   */
  attr : &quot;backupData&quot;, 
  defaultValue : &quot;value&quot;,
  value : function() {},
}, {
  /**
   * Callback called after retrieving backup data.
   *
   * @property retrieveBackup
   * @type Function
   * @param {Object} [hash] JSON object returned by server.
   * @param {String|Class} [type] Record type.
   * @param {Object} [data] JSON object stored in backup.
   * @static
   */
  attr : &quot;retrieveBackup&quot;, 
  defaultValue : &quot;value&quot;,
  value : function() {},
}];

/**
 * Function that returns an ember data model.
 *
 * @method ModelWrapper.createModelWrapper
 * @for model-wrapper
 * @param {Object} [object] JSON that are member attributes.
 * @param {Object} [config] JSON that are static attributes.
 * @param {Array} [mixins] Array of mixins to include.
 */
ModelWrapper.createModelWrapper = function(object, config, mixins) {
  var args = mixins || [];
  args.push(object);
  var model = ModelWrapper.ModelWrapper.extend.apply(ModelWrapper.ModelWrapper, args);
  for(var i = 0; i &lt; CrudAdapter.allowedModelAttrs.length; i++) {
    if(config[CrudAdapter.allowedModelAttrs[i].attr]) {
      model[CrudAdapter.allowedModelAttrs[i].attr] = config[CrudAdapter.allowedModelAttrs[i].attr];
    }
    else {
      if(CrudAdapter.allowedModelAttrs[i].defaultValue === &quot;emptyArray&quot;) {
        model[CrudAdapter.allowedModelAttrs[i].attr] = Ember.A();
      }
      else if(CrudAdapter.allowedModelAttrs[i].defaultValue === &quot;value&quot;) {
        model[CrudAdapter.allowedModelAttrs[i].attr] = CrudAdapter.allowedModelAttrs[i].value;
      }
    }
  }
  return model;
};

var attr = DS.attr, hasMany = DS.hasMany, belongsTo = DS.belongsTo;

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
