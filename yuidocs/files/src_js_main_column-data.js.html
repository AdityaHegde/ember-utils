<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/js/main/column-data.js - Ember Utils</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="Ember Utils"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/Alerts.AlertMessageComponent.html">Alerts.AlertMessageComponent</a></li>
            
                <li><a href="../classes/AppWrapper.AppWrapper.html">AppWrapper.AppWrapper</a></li>
            
                <li><a href="../classes/ArrayMod.ArrayFilterGroup.html">ArrayMod.ArrayFilterGroup</a></li>
            
                <li><a href="../classes/ArrayMod.ArrayFilterModifier.html">ArrayMod.ArrayFilterModifier</a></li>
            
                <li><a href="../classes/ArrayMod.ArrayModController.html">ArrayMod.ArrayModController</a></li>
            
                <li><a href="../classes/ArrayMod.ArrayModGroup.html">ArrayMod.ArrayModGroup</a></li>
            
                <li><a href="../classes/ArrayMod.ArrayModifier.html">ArrayMod.ArrayModifier</a></li>
            
                <li><a href="../classes/ArrayMod.ArraySearchModifier.html">ArrayMod.ArraySearchModifier</a></li>
            
                <li><a href="../classes/ArrayMod.ArraySortGroup.html">ArrayMod.ArraySortGroup</a></li>
            
                <li><a href="../classes/ArrayMod.ArraySortModifier.html">ArrayMod.ArraySortModifier</a></li>
            
                <li><a href="../classes/ArrayMod.ArrayTagObjectModifier.html">ArrayMod.ArrayTagObjectModifier</a></li>
            
                <li><a href="../classes/ArrayMod.ArrayTagSearchModifier.html">ArrayMod.ArrayTagSearchModifier</a></li>
            
                <li><a href="../classes/ColumnData.ColumnData.html">ColumnData.ColumnData</a></li>
            
                <li><a href="../classes/ColumnData.ColumnDataChangeCollectorMixin.html">ColumnData.ColumnDataChangeCollectorMixin</a></li>
            
                <li><a href="../classes/ColumnData.ColumnDataGroup.html">ColumnData.ColumnDataGroup</a></li>
            
                <li><a href="../classes/ColumnData.ColumnDataGroupPluginMixin.html">ColumnData.ColumnDataGroupPluginMixin</a></li>
            
                <li><a href="../classes/ColumnData.ColumnDataValidation.html">ColumnData.ColumnDataValidation</a></li>
            
                <li><a href="../classes/ColumnData.ColumnDataValueMixin.html">ColumnData.ColumnDataValueMixin</a></li>
            
                <li><a href="../classes/ColumnData.CSVDuplicateValidation.html">ColumnData.CSVDuplicateValidation</a></li>
            
                <li><a href="../classes/ColumnData.CSVRegexValidation.html">ColumnData.CSVRegexValidation</a></li>
            
                <li><a href="../classes/ColumnData.DuplicateAcrossRecordsValidation.html">ColumnData.DuplicateAcrossRecordsValidation</a></li>
            
                <li><a href="../classes/ColumnData.EmptyValidation.html">ColumnData.EmptyValidation</a></li>
            
                <li><a href="../classes/ColumnData.NumberRangeValidation.html">ColumnData.NumberRangeValidation</a></li>
            
                <li><a href="../classes/ColumnData.RegexValidation.html">ColumnData.RegexValidation</a></li>
            
                <li><a href="../classes/ColumnDataChangeCollectorMixin.html">ColumnDataChangeCollectorMixin</a></li>
            
                <li><a href="../classes/ColumnDataGroupPluginMixin.html">ColumnDataGroupPluginMixin</a></li>
            
                <li><a href="../classes/ColumnDataValidation.html">ColumnDataValidation</a></li>
            
                <li><a href="../classes/ColumnDataValueMixin.html">ColumnDataValueMixin</a></li>
            
                <li><a href="../classes/CSVDuplicateValidation.html">CSVDuplicateValidation</a></li>
            
                <li><a href="../classes/CSVRegexValidation.html">CSVRegexValidation</a></li>
            
                <li><a href="../classes/DelayedAddToHasMany.html">DelayedAddToHasMany</a></li>
            
                <li><a href="../classes/DragDrop.DraggableMixin.html">DragDrop.DraggableMixin</a></li>
            
                <li><a href="../classes/DragDrop.DroppableMixin.html">DragDrop.DroppableMixin</a></li>
            
                <li><a href="../classes/DuplicateAcrossRecordsValidation.html">DuplicateAcrossRecordsValidation</a></li>
            
                <li><a href="../classes/EmptyValidation.html">EmptyValidation</a></li>
            
                <li><a href="../classes/GlobalModules.DisplayTextCollapsibleColumnDataMixin.html">GlobalModules.DisplayTextCollapsibleColumnDataMixin</a></li>
            
                <li><a href="../classes/GlobalModules.DisplayTextCollapsibleGlypiconColumnDataMixin.html">GlobalModules.DisplayTextCollapsibleGlypiconColumnDataMixin</a></li>
            
                <li><a href="../classes/GlobalModules.DisplayTextCollapsibleGlypiconView.html">GlobalModules.DisplayTextCollapsibleGlypiconView</a></li>
            
                <li><a href="../classes/GlobalModules.DisplayTextCollapsibleView.html">GlobalModules.DisplayTextCollapsibleView</a></li>
            
                <li><a href="../classes/GlobalModules.DisplayTextColumnDataMixin.html">GlobalModules.DisplayTextColumnDataMixin</a></li>
            
                <li><a href="../classes/GlobalModules.DisplayTextView.html">GlobalModules.DisplayTextView</a></li>
            
                <li><a href="../classes/GlobalModules.DisplayTextWithTooltipColumnDataMixin.html">GlobalModules.DisplayTextWithTooltipColumnDataMixin</a></li>
            
                <li><a href="../classes/GlobalModules.DisplayTextWithTooltipView.html">GlobalModules.DisplayTextWithTooltipView</a></li>
            
                <li><a href="../classes/GlobalModules.GlobalModuleColumnDataGroupMixin.html">GlobalModules.GlobalModuleColumnDataGroupMixin</a></li>
            
                <li><a href="../classes/LazyDisplay.LazyDisplayColumnDataGroup.html">LazyDisplay.LazyDisplayColumnDataGroup</a></li>
            
                <li><a href="../classes/LazyDisplay.LazyDisplayView.html">LazyDisplay.LazyDisplayView</a></li>
            
                <li><a href="../classes/ListGroup.ListColumnData.html">ListGroup.ListColumnData</a></li>
            
                <li><a href="../classes/ListGroup.ListColumnDataGroup.html">ListGroup.ListColumnDataGroup</a></li>
            
                <li><a href="../classes/ListGroup.ListGroupView.html">ListGroup.ListGroupView</a></li>
            
                <li><a href="../classes/ListGroup.ListItemView.html">ListGroup.ListItemView</a></li>
            
                <li><a href="../classes/ModelWrapper.ModelWrapper.html">ModelWrapper.ModelWrapper</a></li>
            
                <li><a href="../classes/NumberRangeValidation.html">NumberRangeValidation</a></li>
            
                <li><a href="../classes/ObjectWithArrayMixin.html">ObjectWithArrayMixin</a></li>
            
                <li><a href="../classes/Panels.PanelCollapsibleView.html">Panels.PanelCollapsibleView</a></li>
            
                <li><a href="../classes/Panels.PanelColumnDataGroup.html">Panels.PanelColumnDataGroup</a></li>
            
                <li><a href="../classes/Panels.PanelsView.html">Panels.PanelsView</a></li>
            
                <li><a href="../classes/Panels.PanelView.html">Panels.PanelView</a></li>
            
                <li><a href="../classes/RegexValidation.html">RegexValidation</a></li>
            
                <li><a href="../classes/Timer.AsyncQue.html">Timer.AsyncQue</a></li>
            
                <li><a href="../classes/Timer.Timer.html">Timer.Timer</a></li>
            
                <li><a href="../classes/Tree.LeafView.html">Tree.LeafView</a></li>
            
                <li><a href="../classes/Tree.NodeRecordMixin.html">Tree.NodeRecordMixin</a></li>
            
                <li><a href="../classes/Tree.NodeView.html">Tree.NodeView</a></li>
            
                <li><a href="../classes/Tree.TreeColumnData.html">Tree.TreeColumnData</a></li>
            
                <li><a href="../classes/Tree.TreeColumnDataGroup.html">Tree.TreeColumnDataGroup</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/alerts.html">alerts</a></li>
            
                <li><a href="../modules/app-wrapper.html">app-wrapper</a></li>
            
                <li><a href="../modules/array-modifier.html">array-modifier</a></li>
            
                <li><a href="../modules/array-modifier-types.html">array-modifier-types</a></li>
            
                <li><a href="../modules/column-data.html">column-data</a></li>
            
                <li><a href="../modules/column-data-utils.html">column-data-utils</a></li>
            
                <li><a href="../modules/column-data-validation.html">column-data-validation</a></li>
            
                <li><a href="../modules/drag-drop.html">drag-drop</a></li>
            
                <li><a href="../modules/ember-utils-core.html">ember-utils-core</a></li>
            
                <li><a href="../modules/global-module.html">global-module</a></li>
            
                <li><a href="../modules/global-module-column-data.html">global-module-column-data</a></li>
            
                <li><a href="../modules/global-module-view.html">global-module-view</a></li>
            
                <li><a href="../modules/lazy-display.html">lazy-display</a></li>
            
                <li><a href="../modules/list-column-data.html">list-column-data</a></li>
            
                <li><a href="../modules/list-group.html">list-group</a></li>
            
                <li><a href="../modules/list-item.html">list-item</a></li>
            
                <li><a href="../modules/model-wrapper.html">model-wrapper</a></li>
            
                <li><a href="../modules/panel-column-data.html">panel-column-data</a></li>
            
                <li><a href="../modules/panel-views.html">panel-views</a></li>
            
                <li><a href="../modules/panels.html">panels</a></li>
            
                <li><a href="../modules/timer.html">timer</a></li>
            
                <li><a href="../modules/tree.html">tree</a></li>
            
                <li><a href="../modules/tree-column-data.html">tree-column-data</a></li>
            
                <li><a href="../modules/tree-nodes.html">tree-nodes</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src/js/main/column-data.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * Module for meta data of a record type and its properties.
 *
 * @module column-data
 */
ColumnData = Ember.Namespace.create();

/**
 * Class with meta data of a record type.
 *
 * @class ColumnData.ColumnDataGroup
 */
ColumnData.ColumnDataGroup = Ember.Object.extend({
  init : function (){
    this._super();
    this.set(&quot;columns&quot;, this.get(&quot;columns&quot;) || []);
    ColumnData.Registry.store(this.get(&quot;name&quot;), &quot;columnDataGroup&quot;, this);
  },

  /**
   * A name to uniquely identify the column data group.
   *
   * @property name
   * @type String
   */
  name : &quot;&quot;,

  /**
   * Array of columns. Each element is an object which will be passed to ColumnData.ColumnData.create.
   *
   * @property columns
   * @type Array
   */
  columns : Utils.hasMany(&quot;ColumnData.ColumnData&quot;),

  /**
   * Meta data used by list-group module. Passed as an object while creating.
   *
   * @property list
   * @type Class
   */
  list : Utils.belongsTo(&quot;ListGroup.ListColumnDataGroup&quot;),

  /**
   * Meta data used by tree module. Passed as an object while creating.
   *
   * @property tree
   * @type Class
   */
  tree : Utils.belongsTo(&quot;Tree.TreeColumnDataGroup&quot;),

  /**
   * Meta data used by sortable module. Passed as an object while creating.
   *
   * @property sort
   * @type Class
   */
  sort : Utils.belongsTo(&quot;DragDrop.SortableColumnDataGroup&quot;),

  /**
   * Meta data used by panels module. Passed as an object while creating.
   *
   * @property panel
   * @type Class
   */
  panel : Utils.belongsTo(&quot;Panels.PanelColumnDataGroup&quot;),

  /**
   * Meta data used by lazy-display module. Passed as an object while creating.
   *
   * @property lazyDisplay
   * @type Class
   */
  lazyDisplay : Utils.belongsTo(&quot;LazyDisplay.LazyDisplayColumnDataGroup&quot;),

  /**
   * Meta data used by form module. Passed as an object while creating.
   *
   * @property form
   * @type Class
   */
  form : Utils.belongsTo(&quot;Form.FormColumnDataGroup&quot;),
});


ColumnData.Registry = Ember.Object.create({
  map : {},

  store : function(name, parent, columnData) {
    this.get(&quot;map&quot;)[parent+&quot;:&quot;+name] = columnData;
  },

  retrieve : function(name, parent) {
    return this.get(&quot;map&quot;)[parent+&quot;:&quot;+name];
  },
});


/**
 * Class for meta data for a property on a record.
 *
 * @class ColumnData.ColumnData
 */
ColumnData.ColumnData = Ember.Object.extend({
  init : function () {
    this._super();
    ColumnData.Registry.store(this.get(&quot;name&quot;), &quot;columnData&quot;, this);
  },

  /**
   * A name to uniquely identify column data.
   *
   * @property name
   * @type String
   */
  name : &quot;&quot;,

  /**
   * Key name of the attribute in the record. If not provided, &#x27;name&#x27; is used a key.
   *
   * @property keyName
   * @type String
   */
  keyName : &quot;&quot;,

  /**
   * Key of the attribute based on keyName or name if keyName is not provided.
   *
   * @property key
   * @type String
   * @private
   */
  key : function() {
    return this.get(&quot;keyName&quot;) || this.get(&quot;name&quot;);
  }.property(&quot;keyName&quot;, &quot;name&quot;),

  /**
   * Meta data for the validation of the attribute on the record. Passed as an object while creating.
   *
   * @property validation
   * @type Class
   */
  validation : Utils.belongsTo(&quot;ColumnData.ColumnDataValidation&quot;),

  /**
   * Meta data used by list-group module. Passed as an object while creating.
   *
   * @property list
   * @type Class
   */
  list : Utils.belongsToWithMixin(null, &quot;ListGroup.ListColumnDataMap&quot;, &quot;moduleType&quot;, &quot;GlobalModules.GlobalModulesColumnDataMixinMap&quot;, &quot;viewType&quot;, &quot;GlobalModules.DisplayTextColumnDataMixin&quot;),

  /**
   * Meta data used by tree module. Passed as an object while creating.
   *
   * @property tree
   * @type Class
   */
  tree : Utils.belongsToWithMixin(null, &quot;Tree.TreeColumnDataMap&quot;, &quot;moduleType&quot;, &quot;GlobalModules.GlobalModulesColumnDataMixinMap&quot;, &quot;viewType&quot;, &quot;GlobalModules.DisplayTextColumnDataMixin&quot;),

  /**
   * Meta data used by sortable module. Passed as an object while creating.
   *
   * @property sort
   * @type Class
   */
  sort : Utils.belongsToWithMixin(null, &quot;DragDrop.SortableColumnDataMap&quot;, &quot;moduleType&quot;, &quot;GlobalModules.GlobalModulesColumnDataMixinMap&quot;, &quot;viewType&quot;, &quot;GlobalModules.DisplayTextColumnDataMixin&quot;),

  /**
   * Meta data used by panels module. Passed as an object while creating.
   *
   * @property panel
   * @type Class
   */
  panel : Utils.belongsToWithMixin(null, &quot;Panels.PanelColumnDataMap&quot;, &quot;moduleType&quot;, &quot;GlobalModules.GlobalModulesColumnDataMixinMap&quot;, &quot;viewType&quot;, &quot;GlobalModules.DisplayTextColumnDataMixin&quot;),

  /**
   * Meta data used by form module. Passed as an object while creating.
   *
   * @property form
   * @type Class
   */
  form : Utils.belongsTo(null, &quot;Form.FormColumnDataMap&quot;, &quot;type&quot;),

  /**
   * A suitable label for the attribute used in displaying in certain places.
   *
   * @property label
   * @type String
   */
  label : null,

  /**
   * A nested child column data.
   *
   * @property childCol
   * @type Class
   * @private
   */
  childCol : Utils.belongsTo(&quot;ColumnData.ColumnData&quot;),

  /**
   * A name for the nesting of a column data.
   *
   * @property childColName
   * @type String
   */
  childColName : function(key, value) {
    if(arguments.length &gt; 1) {
      if(value) {
        this.set(&quot;childCol&quot;, ColumnData.Registry.retrieve(value, &quot;columnData&quot;));
      }
      return value;
    }
  }.property(),

  /**
   * A nested child column data group.
   *
   * @property childColGroup
   * @type Class
   * @private
   */
  childColGroup : Utils.belongsTo(&quot;ColumnData.ColumnDataGroup&quot;),

  /**
   * A name for the nesting of a column data group.
   *
   * @property childColGroupName
   * @type String
   * @private
   */
  childColGroupName : function(key, value) {
    if(arguments.length &gt; 1) {
      if(value) {
        this.set(&quot;childColGroup&quot;, ColumnData.Registry.retrieve(value, &quot;columnDataGroup&quot;));
      }
      return value;
    }
  }.property(),
});


/**
 * Validations for property in record.
 *
 * @submodule column-data-validation
 * @module column-data
 */

ColumnData.ColumnDataValidationsMap = {};

/**
 * Validation class that goes as &#x27;validation&#x27; on column data.
 *
 * @class ColumnData.ColumnDataValidation
 */
ColumnData.ColumnDataValidation = Ember.Object.extend({
  init : function() {
    this._super();
    this.canBeEmpty();
  },

  /**
   * Array of validations to run. Passed as objects while creating.
   *
   * @property validations
   * @type Array
   */
  validations : Utils.hasMany(null, ColumnData.ColumnDataValidationsMap, &quot;type&quot;),

  /**
   * @property validate
   * @type Boolean
   * @private
   */
  validate : Ember.computed.notEmpty(&#x27;validations&#x27;),

  /**
   * Method to validate a value on record.
   *
   * @method validateValue
   * @param {any} value Value to validate.
   * @param {Class} record Record to validate on.
   * @param {Array} [validations] Optional override of the validations to run.
   * @returns {Array} Returns an array with 1st element as a boolean which says whether validations passed or not, 2nd element is the invalid message if it failed.
   */
  validateValue : function(value, record, validations) {
    var invalid = [false, &quot;&quot;];
    validations = validations || this.get(&quot;validations&quot;);
    for(var i = 0; i &lt; validations.length; i++) {
      invalid = validations[i].validateValue(value, record);
      if(invalid[0]) break;
    }
    return invalid;
  },

  canBeEmpty : function() {
    if(this.get(&quot;validations&quot;) &amp;&amp; !this.get(&quot;validations&quot;).mapBy(&quot;type&quot;).contains(0)) {
      this.set(&quot;mandatory&quot;, false);
      this.get(&quot;validations&quot;).forEach(function(item) {
        item.set(&#x27;canBeEmpty&#x27;, true);
      });
    }
    else {
      this.set(&quot;mandatory&quot;, true);
    }
  }.observes(&#x27;validations.@each&#x27;),

  /**
   * Boolean to denote whether the property is mandatory or not.
   *
   * @property mandatory
   * @type Boolean
   */
  mandatory : false,
});

/**
 * Not empty validation class. Pass type = 0 to get this.
 *
 * @class ColumnData.EmptyValidation
 */
ColumnData.EmptyValidation = Ember.Object.extend({
  /**
   * Message to show when the validation fails.
   *
   * @property invalidMessage
   * @type String
   */
  invalidMessage : &quot;&quot;,

  /**
   * Boolean that says whether to negate the result or not.
   *
   * @property negate
   * @type Boolean
   */
  negate : false,

  validateValue : function(value, record) {
    var invalid = Ember.isEmpty(value) || /^\s*$/.test(value),
        negate = this.get(&quot;negate&quot;);
    invalid = (negate &amp;&amp; !invalid) || (!negate &amp;&amp; invalid);
    return [invalid, this.get(&quot;invalidMessage&quot;)];
  },

  canBeEmpty : false,
});

/**
 * Validate on a regex. Pass type = 1 to get this.
 *
 * @class ColumnData.RegexValidation
 */
ColumnData.RegexValidation = ColumnData.EmptyValidation.extend({
  /**
   * Regex to valide with.
   *
   * @property regex
   * @type String
   */
  regex : &quot;&quot;,

  /**
   * Regex flags to use while creating the regex object.
   *
   * @property regexFlags
   * @type String
   */
  regexFlags : &quot;&quot;,

  /**
   * RegExp object create using regex and regexFlags.
   *
   * @property regexObject
   * @type RegExp
   */
  regexObject : function() {
    return new RegExp(this.get(&quot;regex&quot;), this.get(&quot;regexFlags&quot;));
  }.property(&#x27;regex&#x27;),

  /**
   * Method to validate.
   *
   * @method validateValue
   * @param {any} value Value to validate.
   * @param {Class} record Record to validate on.
   * @returns {Boolean}
   * @private
   */
  validateValue : function(value, record) {
    var invalid = false, negate = this.get(&quot;negate&quot;),
        isEmpty, emptyBool;
    if(value &amp;&amp; value.trim) value = value.trim();
    isEmpty = Ember.isEmpty(value);
    emptyBool = (this.get(&quot;canBeEmpty&quot;) &amp;&amp; negate) || (!this.get(&quot;canBeEmpty&quot;) &amp;&amp; !negate);
    invalid = (isEmpty &amp;&amp; emptyBool) || this.get(&quot;regexObject&quot;).test(value);
    invalid = (negate &amp;&amp; !invalid) || (!negate &amp;&amp; invalid);
    return [invalid, this.get(&quot;invalidMessage&quot;)];
  },
});

/**
 * Validate on a regex on each value in a Comma Seperated Value. Pass type = 2 to get this.
 *
 * @class ColumnData.CSVRegexValidation
 */
ColumnData.CSVRegexValidation = ColumnData.RegexValidation.extend({
  /**
   * Delimeter to use to split values in the CSV.
   *
   * @property delimeter
   * @type String
   */
  delimeter : &quot;,&quot;,

  validateValue : function(value, record) {
    var invalid = false, negate = this.get(&quot;negate&quot;),
        isEmpty, emptyBool;
    if(value &amp;&amp; value.trim) value = value.trim();
    isEmpty = Ember.isEmpty(value);
    if(!isEmpty) {
      value.split(this.get(&quot;delimeter&quot;)).some(function(item) { 
        item = item.trim();
        invalid = this.get(&quot;regexObject&quot;).test(item); 
        return negate ? !invalid : invalid; 
      }, this); 
      invalid = (negate &amp;&amp; !invalid) || (!negate &amp;&amp; invalid);
    }
    return [invalid, this.get(&quot;invalidMessage&quot;)];
  },
});

/**
 * Validate duplication in a CSV. Pass type = 3 to get this.
 *
 * @class ColumnData.CSVDuplicateValidation
 */
ColumnData.CSVDuplicateValidation = ColumnData.CSVRegexValidation.extend({
  validateValue : function(value, record) {
    var invalid = false, negate = this.get(&quot;negate&quot;),
        isEmpty, emptyBool, valuesMap = {};
    if(value &amp;&amp; value.trim) value = value.trim();
    isEmpty = Ember.isEmpty(value);
    if(!isEmpty) {
      value.split(this.get(&quot;delimeter&quot;)).some(function(item) { 
        item = item.trim();
        if(valuesMap[item]) {
          invalid = true;
        }
        else {
          valuesMap[item] = 1;
        }
        return negate ? !invalid : invalid; 
      }, this); 
      invalid = (negate &amp;&amp; !invalid) || (!negate &amp;&amp; invalid);
    }
    return [invalid, this.get(&quot;invalidMessage&quot;)];
  },
});

/**
 * Validate duplication across siblings of the record. Pass type = 4 to get this.
 *
 * @class ColumnData.DuplicateAcrossRecordsValidation
 */
ColumnData.DuplicateAcrossRecordsValidation = ColumnData.EmptyValidation.extend({
  /**
   * Path relative to record to check duplication under.
   *
   * @property duplicateCheckPath
   * @type String
   */
  duplicateCheckPath : &quot;&quot;,

  /**
   * Key in the object to check duplicate for.
   *
   * @property duplicateCheckKey
   * @type String
   */
  duplicateCheckKey : &quot;id&quot;,

  validateValue : function(value, record) {
    var invalid = false, negate = this.get(&quot;negate&quot;),
        arr = record.get(this.get(&quot;duplicateCheckPath&quot;)),
        values = arr &amp;&amp; arr.filterBy(this.get(&quot;duplicateCheckKey&quot;), value);
    invalid = (values &amp;&amp; values.get(&quot;length&quot;) &gt; 1) || (values.get(&quot;length&quot;) === 1 &amp;&amp; values[0] !== record);
    invalid = (negate &amp;&amp; !invalid) || (!negate &amp;&amp; invalid);
    return [invalid, this.get(&quot;invalidMessage&quot;)];
  },
});

/**
 * Validate number ranges. Pass type = 5 to get this.
 *
 * @class ColumnData.NumberRangeValidation
 */
ColumnData.NumberRangeValidation = ColumnData.EmptyValidation.extend({
  /**
   * Min value of a number.
   *
   * @property minValue
   * @type Number
   */
  minValue : 0,

  /**
   * Max value of a number.
   *
   * @property maxValue
   * @type Number
   */
  maxValue : 999999,

  validateValue : function(value, record) {
    var invalid = false, negate = this.get(&quot;negate&quot;);
    if(value &amp;&amp; value.trim) value = value.trim();
    if(Ember.isEmpty(value)) {
      invalid = (this.get(&quot;canBeEmpty&quot;) &amp;&amp; negate) || (!this.get(&quot;canBeEmpty&quot;) &amp;&amp; !negate);
    }
    else {
      var num = Number(value);
      if(num &lt; this.get(&quot;minValue&quot;) || num &gt; this.get(&quot;maxValue&quot;)) invalid = true;
    }
    invalid = (negate &amp;&amp; !invalid) || (!negate &amp;&amp; invalid);
    return [invalid, this.get(&quot;invalidMessage&quot;)];
  },
});

ColumnData.ColumnDataValidationsMap[0] = ColumnData.EmptyValidation;
ColumnData.ColumnDataValidationsMap[1] = ColumnData.RegexValidation;
ColumnData.ColumnDataValidationsMap[2] = ColumnData.CSVRegexValidation;
ColumnData.ColumnDataValidationsMap[3] = ColumnData.CSVDuplicateValidation;
ColumnData.ColumnDataValidationsMap[4] = ColumnData.DuplicateAcrossRecordsValidation;
ColumnData.ColumnDataValidationsMap[5] = ColumnData.NumberRangeValidation;


/**
 * Utility classes related to column data.
 *
 * @submodule column-data-utils
 * @module column-data
 */

/**
 * A mixin that is a parent of ColumnData.ColumnDataValueMixin that collects value changes and fires listeners on the column.
 *
 * @class ColumnData.ColumnDataChangeCollectorMixin
 */
ColumnData.ColumnDataChangeCollectorMixin = Ember.Mixin.create({
  init : function() {
    this._super();
    this.set(&quot;listenToMap&quot;, this.get(&quot;listenToMap&quot;) || {});
  },
  listenToMap : null,

  bubbleValChange : function(columnData, val, oldVal, callingView) {
    var listenToMap = this.get(&quot;listenToMap&quot;), thisCol = this.get(&quot;columnData&quot;),
        parentForm = this.get(&quot;parentForm&quot;);
    if(listenToMap[columnData.name]) {
      listenToMap[columnData.name].forEach(function(listening) {
        var listeningViews = listening.get(&quot;views&quot;);
        for(var i = 0; i &lt; listeningViews.length; i++) {
          var view = listeningViews[i];
          if(view !== callingView) {
            view.colValueChanged(columnData, val, oldVal);
          }
          if(view.get(&quot;columnData.bubbleValues&quot;) &amp;&amp; parentForm &amp;&amp; parentForm.bubbleValChange) parentForm.bubbleValChange(columnData, val, oldVal, callingView);
        }
      });
    }
    if(!Ember.isNone(oldVal) &amp;&amp; this.get(&quot;record&quot;)) {
      this.get(&quot;record&quot;).set(&quot;tmplPropChangeHook&quot;, columnData.name);
    }
  },

  registerForValChange : function(colView, listenColName) {
    var listenToMap = this.get(&quot;listenToMap&quot;), existing,
        callingCol = colView.get(&quot;columnData&quot;),
        colName = callingCol.get(&quot;name&quot;),
        parentForm = this.get(&quot;parentForm&quot;);
    if(callingCol.get(&quot;bubbleValues&quot;) &amp;&amp; parentForm &amp;&amp; parentForm.registerForValChange) parentForm.registerForValChange(colView, listenColName);
    if(!listenToMap) {
      listenToMap = {};
      this.set(&quot;listenToMap&quot;, listenToMap);
    }
    listenToMap[listenColName] = listenToMap[listenColName] || [];
    existing = listenToMap[listenColName].findBy(&quot;name&quot;, colName);
    if(existing) {
      existing.get(&quot;views&quot;).pushObject(colView);
    }
    else {
      listenToMap[listenColName].pushObject(Ember.Object.create({views : [colView], name : colName}));
    }
  },

  unregisterForValChange : function(colView, listenColName) {
    var listenToMap = this.get(&quot;listenToMap&quot;), callingCol = colView.get(&quot;columnData&quot;),
        colName = callingCol.get(&quot;name&quot;),
        colListener = listenToMap &amp;&amp; listenToMap[listenColName],
        existing = colListener &amp;&amp; listenToMap[listenColName].findBy(&quot;name&quot;, colName),
        parentForm = this.get(&quot;parentForm&quot;);
    if(callingCol.get(&quot;bubbleValues&quot;) &amp;&amp; parentForm &amp;&amp; parentForm.unregisterForValChange) parentForm.unregisterForValChange(colView, listenColName);
    if(existing) {
      var existingViews = existing.get(&quot;views&quot;);
      existingViews.removeObject(colView);
      if(existingViews.length === 0) {
        colListener.removeObject(existing);
      }
      else {
        for(var i = 0; i &lt; existingViews.length; i++) {
          existingViews[i].colValueChanged(Ember.Object.create({name : listenColName, key : listenColName}), null, null);
        }
      }
    }
  },
});

/**
 * A mixin that aliases the value of the attribute given by &#x27;columnData&#x27; in &#x27;record&#x27; to &#x27;value&#x27;.
 *
 * @class ColumnData.ColumnDataValueMixin
 */
ColumnData.ColumnDataValueMixin = Ember.Mixin.create({
  init : function() {
    this._super();
    this.recordDidChange();
    this.registerForValChangeChild();
  },

  /**
   * Column data instance to be used to extract value.
   *
   * @property columnData
   * @type Class
   */
  columnData : null,

  /**
   * Record to extract the value from.
   *
   * @property record
   * @type Class
   */
  record : null,

  listenedColumnChanged : function(changedColumnData, changedValue, oldValue) {
    this.listenedColumnChangedHook(changedColumnData, changedValue, oldValue);
    if(changedColumnData.get(&quot;name&quot;) === this.get(&quot;columnData.name&quot;)) {
      var that = this;
      //The delay is added cos destroy on the view of removed record is called before it is actually removed from array
      //TODO : find a better way to do this check
      Timer.addToQue(&quot;duplicateCheck-&quot;+Utils.getEmberId(this), 100).then(function() {
        if(!that.get(&quot;isDestroyed&quot;)) {
          that.validateValue(that.get(&quot;val&quot;));
        }
      });
    }
  },
  listenedColumnChangedHook : function(changedColumnData, changedValue, oldValue) {
  },

  validateValue : function(value) {
    var columnData = this.get(&quot;columnData&quot;), record = this.get(&quot;record&quot;),
        validation = columnData.get(&quot;validation&quot;);
    if(validation) {
      if(!this.get(&quot;disabled&quot;)) {
        var validVal = validation.validateValue(value, record);
        if(validVal[0]) record._validation[columnData.name] = 1;
        else delete record._validation[columnData.name];
        this.set(&quot;invalid&quot;, validVal[0]);
        this.set(&quot;invalidReason&quot;, !Ember.isEmpty(validVal[1]) &amp;&amp; validVal[1]);
      }
      else {
        delete record._validation[columnData.name];
      }
    }
    record.set(&quot;validationFailed&quot;, Utils.hashHasKeys(record._validation));
  },

  /**
   * An alias to the value in attribute. It undergoes validations and the change will be bubbled.
   *
   * @property value
   */
  value : function(key, val) {
    var columnData = this.get(&quot;columnData&quot;), record = this.get(&quot;record&quot;),
        parentForBubbling = this.get(&quot;parentForBubbling&quot;);
    if(!record || !columnData) return val;
    record._validation = record._validation || {};
    if(arguments.length &gt; 1) {
      if(!(record instanceof DS.Model) || (record.currentState &amp;&amp; !record.currentState.stateName.match(&quot;deleted&quot;))) {
        var oldVal = record.get(columnData.get(&quot;key&quot;));
        this.validateValue(val);
        //TODO : find a better way to fix value becoming null when selection changes
        if(val || !columnData.get(&quot;cantBeNull&quot;)) {
          record.set(columnData.get(&quot;key&quot;), val);
          this.valueDidChange(val);
          if(record.valueDidChange) {
            record.valueDidChange(columnData, val);
          }
          if(parentForBubbling &amp;&amp; parentForBubbling.bubbleValChange) parentForBubbling.bubbleValChange(col, value, oldVal, this); 
        }
      }
      return val;
    }
    else {
      val = record.get(columnData.get(&quot;key&quot;));
      this.validateValue(val);
      if(parentForBubbling &amp;&amp; parentForBubbling.bubbleValChange) parentForBubbling.bubbleValChange(col, value, oldVal, this); 
      return val;
    }
  }.property(&#x27;columnData&#x27;, &#x27;view.columnData&#x27;),

  valueDidChange : function(val) {
  },

  prevRecord : null,
  recordDidChange : function() {
    var record = this.get(&quot;record&quot;), prevRecord = this.get(&quot;prevRecord&quot;),
        columnData = this.get(&quot;columnData&quot;);
    if(prevRecord) {
      Ember.removeObserver(prevRecord, columnData.get(&quot;name&quot;), this, &quot;notifyValChange&quot;);
    }
    if(record) {
      this.recordChangeHook();
      Ember.addObserver(record, columnData.get(&quot;name&quot;), this, &quot;notifyValChange&quot;);
      this.set(&quot;prevRecord&quot;, record);
      this.notifyPropertyChange(&quot;val&quot;);
    }
    else {
      this.recordRemovedHook();
    }
  }.observes(&quot;view.record&quot;, &quot;record&quot;),
  recordChangeHook : function() {
    this.notifyPropertyChange(&#x27;isDisabled&#x27;);
  },
  recordRemovedHook : function(){
  },

  registerForValChangeChild : function() {
    var columnData = this.get(&quot;columnData&quot;), parentForBubbling = this.get(&quot;parentForBubbling&quot;);
    if(columnData.get(&quot;listenForCols&quot;)) {
      columnData.get(&quot;listenForCols&quot;).forEach(function(listenCol) {
        if(parentForBubbling &amp;&amp; parentForBubbling.registerForValChange) parentForBubbling.registerForValChange(this, listenCol);
      }, this);
    }
  },

  unregisterForValChangeChild : function() {
    var columnData = this.get(&quot;columnData&quot;), parentForBubbling = this.get(&quot;parentForBubbling&quot;);
    if(columnData.get(&quot;listenForCols&quot;)) {
      columnData.get(&quot;listenForCols&quot;).forEach(function(listenCol) {
        if(parentForBubbling &amp;&amp; parentForBubbling.unregisterForValChange) parentForBubbling.unregisterForValChange(this, listenCol);
      }, this);
    }
  },

  destroy : function() {
    this._super();
    this.unregisterForValChangeChild();
  },
});

/**
 * A mixin that used by column data group extensions. It adds view lookup paths based on the &#x27;type&#x27; and for modules based on &lt;module&gt;Type.
 *
 * @class ColumnData.ColumnDataGroupPluginMixin
 */
ColumnData.ColumnDataGroupPluginMixin = Ember.Mixin.create(Utils.ObjectWithArrayMixin, {
  init : function() {
    this._super();
    var arrayProps = this.get(&quot;arrayProps&quot;);
    if(!arrayProps.contains(&quot;modules&quot;)) {
      arrayProps.pushObject(&quot;modules&quot;);
    }
  },

  /**
   * Type of the column data group extension. Used to extract &#x27;typeLookup&#x27; in &#x27;lookupMap&#x27; along with &#x27;type&#x27;.
   *
   * @property groupType
   * @type String
   */
  groupType : null,

  /**
   * Type of the column data group in extension. Used to extract &#x27;typeLookup&#x27; in &#x27;lookupMap&#x27; along with &#x27;groupType&#x27;.
   *
   * @property type
   * @type String
   */
  type : &quot;base&quot;,

  /**
   * View lookup path extracted from &#x27;lookupMap&#x27; using &#x27;groupType&#x27; and &#x27;type&#x27;.
   *     lookupMap[groupType][type]
   *
   * @property typeLookup
   * @type String
   */
  typeLookup : function() {
    return this.get(&quot;lookupMap&quot;)[this.get(&quot;groupType&quot;)][this.get(&quot;type&quot;)];
  }.property(&quot;type&quot;),

  arrayProps : [&#x27;modules&#x27;],

  /**
   * Array of modules present in the extension.
   *
   * @property modules
   * @type Array
   */
  modules : null,

  modulesWillBeDeleted : function(modules, idxs) {
    for(var i = 0; i &lt; modules.length; i++) {
      this.removeObserver(modules[i]+&quot;Type&quot;, this, &quot;moduleTypeDidChange&quot;);
    }
  },
  modulesWasAdded : function(modules, idxs) {
    for(var i = 0; i &lt; modules.length; i++) {
      this.addObserver(modules[i]+&quot;Type&quot;, this, &quot;moduleTypeDidChange&quot;);
      this.moduleTypeDidChange(this, modules[i]+&quot;Type&quot;);
    }
    this.columnsChanged();
  },

  moduleTypeDidChange : function(obj, key) {
    var module = key.match(/^(\w*)Type$/)[1];
    this.set(module+&quot;Lookup&quot;, this.get(&quot;lookupMap&quot;)[module][this.get(key) || &quot;base&quot;]);
  },

  columnsChanged : function() {
    var columns = this.get(&quot;parentObj.columns&quot;), modules = this.get(&quot;modules&quot;);
    if(columns) {
      for(var i = 0; i &lt; modules.length; i++) {
        this.set(modules[i]+&quot;ColumnData&quot;, columns.findBy(this.get(&quot;groupType&quot;)+&quot;.type&quot;, modules[i]));
      }
    }
  }.observes(&quot;parentObj.columns.@each.panel&quot;),
});


/***   Initilizer   ***/

ColumnData.initializer = function(app) {
  if(app.ColumnData) {
    for(var i = 0; i &lt; app.ColumnData.length; i++) {
      ColumnData.ColumnDataGroup.create(app.ColumnData[i]);
    }
  }
};

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
