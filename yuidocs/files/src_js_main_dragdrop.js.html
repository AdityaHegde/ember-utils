<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/js/main/dragdrop.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/Alerts.AlertMessageComponent.html">Alerts.AlertMessageComponent</a></li>
            
                <li><a href="../classes/AppWrapper.AppWrapper.html">AppWrapper.AppWrapper</a></li>
            
                <li><a href="../classes/DragDrop.DraggableMixin.html">DragDrop.DraggableMixin</a></li>
            
                <li><a href="../classes/DragDrop.DroppableMixin.html">DragDrop.DroppableMixin</a></li>
            
                <li><a href="../classes/GlobalModules.DisplayTextCollapsibleColumnDataMixin.html">GlobalModules.DisplayTextCollapsibleColumnDataMixin</a></li>
            
                <li><a href="../classes/GlobalModules.DisplayTextCollapsibleGlypiconColumnDataMixin.html">GlobalModules.DisplayTextCollapsibleGlypiconColumnDataMixin</a></li>
            
                <li><a href="../classes/GlobalModules.DisplayTextCollapsibleGlypiconView.html">GlobalModules.DisplayTextCollapsibleGlypiconView</a></li>
            
                <li><a href="../classes/GlobalModules.DisplayTextCollapsibleView.html">GlobalModules.DisplayTextCollapsibleView</a></li>
            
                <li><a href="../classes/GlobalModules.DisplayTextColumnDataMixin.html">GlobalModules.DisplayTextColumnDataMixin</a></li>
            
                <li><a href="../classes/GlobalModules.DisplayTextView.html">GlobalModules.DisplayTextView</a></li>
            
                <li><a href="../classes/GlobalModules.DisplayTextWithTooltipColumnDataMixin.html">GlobalModules.DisplayTextWithTooltipColumnDataMixin</a></li>
            
                <li><a href="../classes/GlobalModules.DisplayTextWithTooltipView.html">GlobalModules.DisplayTextWithTooltipView</a></li>
            
                <li><a href="../classes/GlobalModules.GlobalModuleColumnDataGroupMixin.html">GlobalModules.GlobalModuleColumnDataGroupMixin</a></li>
            
                <li><a href="../classes/LazyDisplay.LazyDisplayColumnDataGroup.html">LazyDisplay.LazyDisplayColumnDataGroup</a></li>
            
                <li><a href="../classes/LazyDisplay.LazyDisplayView.html">LazyDisplay.LazyDisplayView</a></li>
            
                <li><a href="../classes/ListGroup.ListColumnData.html">ListGroup.ListColumnData</a></li>
            
                <li><a href="../classes/ListGroup.ListColumnDataGroup.html">ListGroup.ListColumnDataGroup</a></li>
            
                <li><a href="../classes/ListGroup.ListGroupView.html">ListGroup.ListGroupView</a></li>
            
                <li><a href="../classes/ListGroup.ListItemView.html">ListGroup.ListItemView</a></li>
            
                <li><a href="../classes/ModelWrapper.ModelWrapper.html">ModelWrapper.ModelWrapper</a></li>
            
                <li><a href="../classes/Panels.PanelCollapsibleView.html">Panels.PanelCollapsibleView</a></li>
            
                <li><a href="../classes/Panels.PanelColumnDataGroup.html">Panels.PanelColumnDataGroup</a></li>
            
                <li><a href="../classes/Panels.PanelsView.html">Panels.PanelsView</a></li>
            
                <li><a href="../classes/Panels.PanelView.html">Panels.PanelView</a></li>
            
                <li><a href="../classes/Timer.AsyncQue.html">Timer.AsyncQue</a></li>
            
                <li><a href="../classes/Timer.Timer.html">Timer.Timer</a></li>
            
                <li><a href="../classes/Tree.LeafView.html">Tree.LeafView</a></li>
            
                <li><a href="../classes/Tree.NodeRecordMixin.html">Tree.NodeRecordMixin</a></li>
            
                <li><a href="../classes/Tree.NodeView.html">Tree.NodeView</a></li>
            
                <li><a href="../classes/Tree.TreeColumnData.html">Tree.TreeColumnData</a></li>
            
                <li><a href="../classes/Tree.TreeColumnDataGroup.html">Tree.TreeColumnDataGroup</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/alerts.html">alerts</a></li>
            
                <li><a href="../modules/app-wrapper.html">app-wrapper</a></li>
            
                <li><a href="../modules/drag-drop.html">drag-drop</a></li>
            
                <li><a href="../modules/global-module.html">global-module</a></li>
            
                <li><a href="../modules/global-module-column-data.html">global-module-column-data</a></li>
            
                <li><a href="../modules/global-module-view.html">global-module-view</a></li>
            
                <li><a href="../modules/lazy-display.html">lazy-display</a></li>
            
                <li><a href="../modules/list-column-data.html">list-column-data</a></li>
            
                <li><a href="../modules/list-group.html">list-group</a></li>
            
                <li><a href="../modules/list-item.html">list-item</a></li>
            
                <li><a href="../modules/model-wrapper.html">model-wrapper</a></li>
            
                <li><a href="../modules/panel-column-data.html">panel-column-data</a></li>
            
                <li><a href="../modules/panel-views.html">panel-views</a></li>
            
                <li><a href="../modules/panels.html">panels</a></li>
            
                <li><a href="../modules/timer.html">timer</a></li>
            
                <li><a href="../modules/tree.html">tree</a></li>
            
                <li><a href="../modules/tree-column-data.html">tree-column-data</a></li>
            
                <li><a href="../modules/tree-nodes.html">tree-nodes</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src/js/main/dragdrop.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * A drag drop module for all operations related to drag and drop. Uses html5 drag drop feature.
 *
 * @module drag-drop
 */
DragDrop = Ember.Namespace.create();
//temp solution for chrome&#x27;s buggy event.dataTransfer, v31.x.x
DragDrop.VIEW_ID = &quot;&quot;;
DragDrop.MOVE_THRESHOLD = 2;

/**
 * A draggable mixin when included enables the view to be dragged.
 *
 * @class DragDrop.DraggableMixin
 */
DragDrop.DraggableMixin = Ember.Mixin.create({
  classNames : [&#x27;dragdrop-draggable&#x27;],

  attributeBindings : &#x27;draggable&#x27;,
  draggable : &#x27;true&#x27;,
  move : true,
  dragStart : function(event) {
    var dataTransfer = event.originalEvent.dataTransfer, viewid = this.get(&quot;elementId&quot;);
    dataTransfer.setData(&#x27;ViewId&#x27;, viewid);
    dataTransfer.dropEffect = &#x27;move&#x27;;
    DragDrop.VIEW_ID = viewid;
    if(this.get(&quot;move&quot;)) {
      var ele = this.get(&quot;element&quot;);
      this.set(&quot;mouseOffset&quot;, { left : Utils.getOffset(ele, &quot;Left&quot;) - event.originalEvent.x, top : Utils.getOffset(ele, &quot;Top&quot;) - event.originalEvent.y });
    }
    this.dragStartCallback(event);
    event.stopPropagation();
  },

  /**
   * A callback method that is called when a drag starts.
   *
   * @method dragStartCallback
   * @param {Object} event The event object of the dragStart event.
   */
  dragStartCallback : function(event) {
  },

  /**
   * Targets that are allowed to be dropped on. Can be a selector or an array of selectors.
   *
   * @property allowedDropTargets
   * @type String|Array
   * @default &#x27;.dragdrop-droppable&#x27;
   */
  allowedDropTargets : &#x27;.dragdrop-droppable&#x27;,
});

/**
 * A droppable mixin when included enables the view to be dropped on.
 *
 * @class DragDrop.DroppableMixin
 */
DragDrop.DroppableMixin = Ember.Mixin.create({
  classNames : [&#x27;dragdrop-droppable&#x27;],

  selectorsPass : function(ele, selectors) {
    if(Ember.typeOf(selectors)  !== &#x27;array&#x27;) {
      selectors = [selectors];
    }
    for(var i = 0; i &lt; selectors.length; i++) {
      if(!Ember.isEmpty(ele.filter(selectors[i]))) {
        return true;
      }
    }
    return false;
  },
  canInteract : function(dragView, dragEle, dropView, dropEle) {
    return this.selectorsPass(dropEle, dragView.get(&quot;allowedDropTargets&quot;)) &amp;&amp; this.selectorsPass(dragEle, dropView.get(&quot;acceptDropFrom&quot;));
  },

  dragEnter: function(event) {
    var dragView = Ember.View.views[DragDrop.VIEW_ID], dragEle = dragView &amp;&amp; $(dragView.get(&quot;element&quot;)),
        dropView = this, dropEle = $(event.target);
    if(dragView &amp;&amp; this.canInteract(dragView, dragEle, dropView, dropEle)) {
      this.dragEnterCallback(event, dragView, dragEle, dropView, dropEle);
    }
    event.preventDefault();
  },
  dragOver : function(event) {
    var dragView = Ember.View.views[DragDrop.VIEW_ID], dragEle = dragView &amp;&amp; $(dragView.get(&quot;element&quot;)),
        dropView = this, dropEle = $(event.target);
    if(dragView &amp;&amp; this.canInteract(dragView, dragEle, dropView, dropEle)) {
      this.dragOverCallback(event, dragView, dragEle, dropView, dropEle);
    }
    event.preventDefault();
  },
  dragLeave : function(event) {
    var dragView = Ember.View.views[DragDrop.VIEW_ID], dragEle = dragView &amp;&amp; $(dragView.get(&quot;element&quot;)),
        dropView = this, dropEle = $(event.target);
    if(dragView &amp;&amp; this.canInteract(dragView, dragEle, dropView, dropEle)) {
      this.dragLeaveCallback(event, dragView, dragEle, dropView, dropEle);
    }
    event.preventDefault();
  },
  drop: function(event) {
    var dragView = Ember.View.views[DragDrop.VIEW_ID], dragEle = dragView &amp;&amp; $(dragView.get(&quot;element&quot;)),
        dropView = this, dropEle = $(event.target);
    if(dragView &amp;&amp; this.canInteract(dragView, dragEle, dropView, dropEle)) {
      if(dragView.get(&quot;move&quot;)) {
        var mouseOffset = dragView.get(&quot;mouseOffset&quot;);
        dragEle.offset({ left : mouseOffset.left + event.originalEvent.x, top : mouseOffset.top + event.originalEvent.y });
      }
      this.dropCallback(event, dragView, dragEle, dropView, dropEle);
    }
    event.preventDefault();
  },

  /**
   * A callback method that is called when the view being dragged enters this view.
   *
   * @method dragEnterCallback
   * @param {Object} event The event object of the dragStart event.
   * @param {Class} dragView The view being dragged.
   * @param {Class} dragEle The element being dragged.
   * @param {Class} dropView The view being dropped on.
   * @param {Class} dropEle The element being dropped on.
   */
  dragEnterCallback : function(event, dragView, dragEle, dropView, dropEle) {
  },

  /**
   * A callback method that is called when the view being dragged is over this view.
   *
   * @method dragOverCallback
   * @param {Object} event The event object of the dragStart event.
   * @param {Class} dragView The view being dragged.
   * @param {Class} dragEle The element being dragged.
   * @param {Class} dropView The view being dropped on.
   * @param {Class} dropEle The element being dropped on.
   */
  dragOverCallback : function(event, dragView, dragEle, dropView, dropEle) {
  },

  /**
   * A callback method that is called when the view being dragged leaves this view.
   *
   * @method dragLeaveCallback
   * @param {Object} event The event object of the dragStart event.
   * @param {Class} dragView The view being dragged.
   * @param {Class} dragEle The element being dragged.
   * @param {Class} dropView The view being dropped on.
   * @param {Class} dropEle The element being dropped on.
   */
  dragLeaveCallback : function(event, dragView, dragEle, dropView, dropEle) {
  },

  /**
   * A callback method that is called when the view being dragged is dropped on this view.
   *
   * @method dropCallback
   * @param {Object} event The event object of the dragStart event.
   * @param {Class} dragView The view being dragged.
   * @param {Class} dragEle The element being dragged.
   * @param {Class} dropView The view being dropped on.
   * @param {Class} dropEle The element being dropped on.
   */
  dropCallback : function(event, dragView, dragEle, dropView, dropEle) {
  },

  /**
   * Accept drops from elements passing the selectors. Can be a single selectors or an array of it.
   *
   * @property acceptDropFrom
   * @type String|Array
   * @default &#x27;.dragdrop-draggable&#x27;
   */
  acceptDropFrom : &#x27;.dragdrop-draggable&#x27;,
});


/***   Sortable Module   ***/

DragDrop.SortableDraggableMixin = Ember.Mixin.create(DragDrop.DraggableMixin, DragDrop.DroppableMixin, {
  init : function() {
    this._super();
    this.set(&quot;lastXY&quot;, [0, 0]);
  },
  classNames : [&#x27;dragdrop-sortable-element&#x27;],
  //classNameBindings : Ember.computed.alias(&#x27;columnDataGroup.sort.sortableDragableClassNames&#x27;),
  sortEleId : function() {
    return this.get(&quot;record.&quot;+this.get(&quot;columnDataGroup.sort.sortEleIdColumnData.key&quot;));
  }.property(&quot;view.columnData.key&quot;),
  sortableView : null,
  groupId : 0,
  hasElements : false,
  curGrpId : function() {
    return this.get(&quot;groupId&quot;);
  }.property(&#x27;view.groupId&#x27;, &#x27;view.columnDataGroup.sort.sameLevel&#x27;),
  stateData : null,
  hierarchy : &quot;&quot;,
  /* effective hierarchy */
  effH : function() {
    return this.get(&quot;hierarchy&quot;)+&quot;_&quot;+this.get(&quot;groupId&quot;);
  }.property(&#x27;view.groupId&#x27;, &#x27;view.hierarchy&#x27;),
  isPlaceholder : false,
  move : false,
  calcAppendPosition : function(xy) {
    var lxy = this.get(&quot;lastXY&quot;),
        dx = xy[0] - lxy[0], adx = Math.abs(dx),
        dy = xy[1] - lxy[1], ady = Math.abs(dy),
        rd = dx, ard = adx;
    if(ady &gt; adx) {
      rd = dy;
      ard = ady;
    }
    if(ard &gt; DragDrop.MOVE_THRESHOLD) {
      if(rd &lt; 0) {
        this.set(&quot;appendNext&quot;, false);
      }
      else {
        this.set(&quot;appendNext&quot;, true);
      }
      this.set(&quot;lastXY&quot;, xy);
      this.set(&quot;change&quot;, true);
    }
    else {
      this.set(&quot;change&quot;, false);
    }
  },
  dragOverCallback : function(event, dragView, dragEle, dropView, dropEle) {
    if(dropView.get(&quot;sortableView&quot;) &amp;&amp; dragView.get(&quot;sortableView&quot;)) {
      var
      columnDataGroup = this.get(&quot;columnDataGroup&quot;),
      sortEleIdKey = columnDataGroup.get(&quot;sort.sortEleIdColumnData.key&quot;),

      //sortable container and it&#x27;s element id of the element dropped on
      dropViewSort = dropView.get(&quot;sortableView&quot;),
      dropViewSortId = dropViewSort.get(&quot;elementId&quot;),
      //siblings of the element dropped on
      dropViewEles = dropViewSort.get(&quot;sortEleChildren&quot;),
      //sort id of the element dropped on
      dropViewSortEleId = dropView.get(&quot;sortEleId&quot;),
      //index of the element dropped on in the array of siblings
      dropViewIdx = dropViewEles.indexOf(dropViewEles.findBy( sortEleIdKey, dropViewSortEleId )),

      //sort id of the element dragged
      dragViewSortEleId = dragView.get(&quot;sortEleId&quot;),
      //sortable container and it&#x27;s element id of the element dragged
      dragViewSort = dragView.get(&quot;sortableView&quot;),
      dragViewSortId = dragViewSort.get(&quot;elementId&quot;),
      //siblings of the element dragged
      dragViewEles = dragViewSort.get(&quot;sortEleChildren&quot;),
      //index of the element dragged in the array of siblings
      dragViewIdx = dragViewEles.indexOf(dragViewEles.findBy( sortEleIdKey, dragViewSortEleId )),
      dragViewData = dragViewEles[dragViewIdx];

      dragView.calcAppendPosition([event.originalEvent.x, event.originalEvent.y]);
      if(dropViewSort.get(&quot;effH&quot;) === dragViewSort.get(&quot;effH&quot;)) {
        //allow sortable on views with same hierarchy

        if(dragView.get(&quot;change&quot;)) {
          //process only if there is a change in the mouse position

          if(dropViewSortId === dragViewSortId) {
            //if both eles are from the same sortable container (siblings)

            if(dropViewSortEleId !== dragViewSortEleId &amp;&amp; dropViewIdx !== dragViewIdx) {
              //process only if the eles are not the same
              //return;

              if(dropViewSort.get(&quot;length&quot;) == 1 &amp;&amp; dropViewSort.objectAt(0).isPlaceholder) {
                //if there only 1 element and its a placeholder, remove it
                dropViewSort.removeAt(0);
              }

              //remove the dragged ele from its siblings array
              dropViewEles.removeAt(dragViewIdx);
              //remove the dragged ele&#x27;s view from sortable container
              dropViewSort.removeAt(dragViewIdx);
              //if need to append after (calculated based on mouse position difference), increment dropViewIdx
              if(dragView.get(&quot;appendNext&quot;)) dropViewIdx++;
              //correct dropViewIdx to dropViewEles.length if needed
              if(dropViewIdx &gt; dropViewEles.length) dropViewIdx = dropViewEles.length;
              else if(dropViewIdx === -1) dropViewIdx = 0;
              //insert the dragViewData to siblings array at the new index
              dropViewEles.insertAt(dropViewIdx, dragViewData);
              //insert the dragView to sortable container at the new index
              dropViewSort.insertAt(dropViewIdx, dragView);

              //reset the change boolean
              dragView.set(&quot;change&quot;, false);
              //stop propagation if it was processed
              event.stopPropagation();
            }
          }
          else {
            if(dropViewEles.indexOf(dragViewData) === -1 &amp;&amp; !Utils.deepSearchArray(dragViewData, dropViewSortEleId, sortEleIdKey, columnDataGroup.get(&quot;sort.sortEleChildrenColumnData.key&quot;))) {
              //process only if dropViewEles doesnt have dragViewData and dragViewData doesnt have dropViewSortEleId somewhere at a deeper level
              //this is to prevent a parent being dropped on its child
              //return;

              if(dropViewSort.get(&quot;length&quot;) == 1 &amp;&amp; dropViewSort.objectAt(0).isPlaceholder) {
                //if there only 1 element and its a placeholder, remove it
                dropViewSort.removeAt(0);
              }

              //remove the dragged ele from its siblings array
              dragViewEles.removeAt(dragViewIdx);
              //remove the dragged ele&#x27;s view from sortable container
              dragViewSort.removeAt(dragViewIdx);
              //if need to append after (calculated based on mouse position difference), increment dropViewIdx
              if(dragView.get(&quot;appendNext&quot;)) dropViewIdx++;
              //correct dropViewIdx to dropViewEles.length if needed
              if(dropViewIdx &gt; dropViewEles.length) dropViewIdx = dropViewEles.length;
              else if(dropViewIdx === -1) dropViewIdx = 0;
              //insert the dragViewData to siblings array at the new index
              dropViewEles.insertAt(dropViewIdx, dragViewData);
              //update the sortable container view of the drag ele to the drop&#x27;s container
              dragView.set(&quot;sortableView&quot;, dropViewSort);
              //insert the dragView to sortable container at the new index
              dropViewSort.insertAt(dropViewIdx, dragView);
              if(dragViewSort.get(&quot;length&quot;) === 0) {
                //if the drag ele&#x27;s sortable container is empty, leave a placeholder in it&#x27;s place
                dragViewSort.pushObject(columnDataGroup.get(&quot;sort.placeholderClass&quot;).create({
                  sortableView : dragViewSort,
                  hierarchy : dragView.get(&quot;hierarchy&quot;),
                  groupId : dragView.get(&quot;stateData.grpId&quot;),
                  columnDataGroup : columnDataGroup,
                }));
              }

              //reset the change boolean
              dragView.set(&quot;change&quot;, false);
              //stop propagation if it was processed
              event.stopPropagation();
            }
          }
        }
      }
    }
  },
  change : false,
  appendNext : false,
  lastXY : null,
});

DragDrop.SortableDroppableMixin = Ember.Mixin.create(DragDrop.DroppableMixin, {
  init : function() {
    this._super();
    this.set(&quot;stateData&quot;, this.get(&quot;stateData&quot;) || {grpId : 0});
    //console.log(&quot;new droppable create!&quot;);
    this.sortEleChildrenDidChange();
  },

  classNames : [&#x27;dragdrop-sortable-container&#x27;],
  //classNameBindings : Ember.computed.alias(&#x27;columnDataGroup.sort.sortableDroppableClassNames&#x27;),

  sortEleChildren : function() {
    return this.get(&quot;record.&quot;+this.get(&quot;columnDataGroup.sort.sortEleChildrenColumnData.key&quot;));
  }.property(&quot;view.columnDataGroup.sort.sortEleChildrenColumnData&quot;, &quot;view.record&quot;),
  sortEleChildrenDidChange : function() {
    var sortEleChildren = this.get(&quot;sortEleChildren&quot;), columnDataGroup = this.get(&quot;columnDataGroup&quot;),
        thisLen = this.get(&quot;length&quot;), newLen = sortEleChildren.length,
        replaceLen = (newLen &lt; thisLen ? newLen : thisLen),
        addNewLen = newLen - replaceLen,
        i = 0;
        stateData = this.get(&quot;stateData&quot;),
        sortEleChildrenClassMap = columnDataGroup.get(&quot;sort.sortEleChildrenClassMap&quot;),
        sortEleChildrenClassColumnData = columnDataGroup.get(&quot;sort.sortEleChildrenClassColumnData&quot;),
        sortEleChildrenColumnGroupLookup = columnDataGroup.get(&quot;sort.sortEleChildrenColumnGroupLookup&quot;);
    for(; i &lt; replaceLen; i++) {
      this.objectAt(i).setProperties({
        record : sortEleChildren[i],
        columnDataGroup : ColumnData.Registry.retrieve(sortEleChildren[i].get(sortEleChildrenColumnGroupLookup.get(&quot;key&quot;)), &quot;columnDataGroup&quot;),
        stateData : stateData,
        sortableView : this,
      });
    }
    for(; i &lt; addNewLen; i++) {
      this.pushObject(sortEleChildrenClassMap[sortEleChildren[i].get(sortEleChildrenClassColumnData.get(&quot;key&quot;))].create({
        record : sortEleChildren[i],
        columnDataGroup : ColumnData.Registry.retrieve(sortEleChildren[i].get(sortEleChildrenColumnGroupLookup.get(&quot;key&quot;)), &quot;columnDataGroup&quot;),
        stateData : stateData,
        sortableView : this,
      }));
    }
    if(sortEleChildren.length === 0) {
      this.pushObject(columnDataGroup.get(&quot;sort.placeholderClass&quot;).create({
        record : this.get(&quot;record&quot;),
        columnDataGroup : columnDataGroup,
        stateData : stateData,
        sortableView : this,
      }));
    }
  }.observes(&quot;view.sortEleChildren&quot;),

  elesIsEmpty : Ember.computed.empty(&#x27;sortEleChildren.@each&#x27;),
  groupId : 0,
  hierarchy : &quot;&quot;,
  stateData : null,
  /* effective hierarchy */
  effH : function() {
    return this.get(&quot;hierarchy&quot;)+&quot;_&quot;+this.get(&quot;groupId&quot;);
  }.property(&#x27;view.groupId&#x27;, &#x27;view.hierarchy&#x27;),
  isPlaceholder : false,
});

DragDrop.SortablePlaceholderMixin = Ember.Mixin.create(DragDrop.DraggableMixin, DragDrop.DroppableMixin, {
  init : function() {
    this._super();
  },

  isPlaceholder : true,
  move : false,

  classNames : [&#x27;dragdrop-sortable-placeholder&#x27;],
  //classNameBindings : Ember.computed.alias(&#x27;columnDataGroup.sort.sortablePlaceholderClassNames&#x27;),
  columnDataGroup : null,
  sortableView : null,
  groupId : 0,
  hierarchy : &quot;&quot;,
  /* effective hierarchy */
  effH : function() {
    return this.get(&quot;hierarchy&quot;)+&quot;_&quot;+this.get(&quot;groupId&quot;);
  }.property(&#x27;view.groupId&#x27;, &#x27;view.hierarchy&#x27;),
  dragOverCallback : function(event, dragView, dragEle, dropView, dropEle) {
    if(dropView.get(&quot;sortableView&quot;) &amp;&amp; dragView.get(&quot;sortableView&quot;)) {
      var
      columnDataGroup = this.get(&quot;columnDataGroup&quot;),

      //sortable container and it&#x27;s element id of the element dropped on
      dropViewSort = dropView.get(&quot;sortableView&quot;),
      dropViewSortId = dropViewSort.get(&quot;elementId&quot;),
      //siblings of the element dropped on
      dropViewEles = dropViewSort.get(&quot;sortEleChildren&quot;),
      //sort id of the element dropped on
      dropViewSortEleId = dropView.get(&quot;sortEleId&quot;),
      //index of the element dropped on in the array of siblings
      dropViewIdx = dropViewEles.indexOf(dropViewEles.findBy( columnDataGroup.get(&quot;sort.sortEleIdColumnData.key&quot;), dropViewSortEleId)),

      //sort id of the element dragged
      dragViewSortEleId = dragView.get(&quot;sortEleId&quot;),
      //sortable container and it&#x27;s element id of the element dragged
      dragViewSort = dragView.get(&quot;sortableView&quot;),
      dragViewSortId = dragViewSort.get(&quot;elementId&quot;),
      //siblings of the element dragged
      dragViewEles = dragViewSort.get(&quot;sortEleChildren&quot;),
      //index of the element dragged in the array of siblings
      dragViewIdx = dragViewEles.indexOf(dragViewEles.findBy( columnDataGroup.get(&quot;sort.sortEleIdColumnData.key&quot;), dragViewSortEleId)),
      dragViewData = dragViewEles[dragViewIdx];

      dragView.calcAppendPosition([event.originalEvent.x, event.originalEvent.y]);
      if(dropViewSort.get(&quot;effH&quot;) === dragViewSort.get(&quot;effH&quot;)) {
        //allow sortable on views with same hierarchy

        if(dragView.get(&quot;change&quot;)) {
          //process only if there is a change in the mouse position

          if(dropViewSort.get(&quot;length&quot;) == 1 &amp;&amp; dropViewSort.objectAt(0).isPlaceholder) {
            //if there only 1 element and its a placeholder, remove it
            dropViewSort.removeAt(0);
          }

          //remove the dragged ele from its siblings array
          dragViewEles.removeAt(dragViewIdx);
          //remove the dragged ele&#x27;s view from sortable container
          dragViewSort.removeAt(dragViewIdx);
          //insert the dragViewData to siblings array at the end
          dropViewEles.pushObject(dragViewData);
          //insert the dragView to sortable container at the end
          dropViewSort.pushObject(dragView);
          //update the sortable container view of the drag ele to the drop&#x27;s container
          dragView.set(&quot;sortableView&quot;, dropViewSort);

          //reset the change boolean
          dragView.set(&quot;change&quot;, false);
          //stop propagation if it was processed
          event.stopPropagation();
        }
      }
    }
  },
});


/***    Sortable ColumnData Interface    ***/

DragDrop.SortableColumnDataGroup = Ember.Object.extend({
  sortableDragableClassNames : [],
  sortableDroppableClassNames : [],
  sortablePlaceholderClassNames : [],

  sortEleIdColumnData : function() {
    return this.get(&quot;parentObj.columns&quot;).findBy(&quot;sort.type&quot;, &quot;sortEleId&quot;);
  }.property(&quot;parentObj.columns.@each.sort&quot;),
  sortEleChildrenColumnData : function() {
    return this.get(&quot;parentObj.columns&quot;).findBy(&quot;sort.type&quot;, &quot;sortEleChildren&quot;);
  }.property(&quot;parentObj.columns.@each.sort&quot;),

  sortEleChildrenClassMap : function() {
    return Ember.get(this.get(&quot;sortEleChildrenClassMapName&quot;));
  }.property(&quot;sortEleChildrenClassMapName&quot;),
  sortEleChildrenClassMapName : null,
  sortEleChildrenClassColumnData : function() {
    return this.get(&quot;parentObj.columns&quot;).findBy(&quot;sort.type&quot;, &quot;sortEleChildrenClass&quot;);
  }.property(&quot;parentObj.columns.@each.sort&quot;),

  sortEleChildrenColumnGroupLookup : function() {
    return this.get(&quot;parentObj.columns&quot;).findBy(&quot;sort.type&quot;, &quot;sortEleChildrenColumnGroup&quot;);
  }.property(&quot;parentObj.columns.@each.sort&quot;),

  placeholderClass : function() {
    return Ember.get(this.get(&quot;placeholderClassName&quot;));
  }.property(&quot;placeholderClassName&quot;),
  placeholderClassName : &quot;&quot;,

  sameLevel : false,
});

DragDrop.SortableEleIdColumnData = Ember.Object.extend({
});

DragDrop.SortableEleChildrenColumnData = Ember.Object.extend({
});

DragDrop.SortableEleChildrenClassColumnData = Ember.Object.extend({
});

DragDrop.SortableEleChildrenColumnGroup = Ember.Object.extend({
});

DragDrop.SortableColumnDataMap = {
  sortEleId : DragDrop.SortableEleIdColumnData,
  sortEleChildren : DragDrop.SortableEleChildrenColumnData,
  sortEleChildrenClass : DragDrop.SortableEleChildrenClassColumnData,
  sortEleChildrenColumnGroup : DragDrop.SortableEleChildrenColumnGroup,
};

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
